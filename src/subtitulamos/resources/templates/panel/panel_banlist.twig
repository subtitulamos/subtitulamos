{% extends "panel/panel_base.twig" %}
{% import 'macros/assets.twig' as assets %}
{% import 'macros/alerts.twig' as alerts %}

{% block title %}Alertas{% endblock %}
{% block panel_content %}
  {% for error in auth.flash.errors %}
    {{ alerts.show('error', error) }}
  {% endfor %}
  {% for success in auth.flash.successes %}
    {{ alerts.show('success', success) }}
  {% endfor %}

  <h1>Lista de usuarios baneados</h1>
  <h4>Temporalmente</h4>
  <ul>
  {% for ban in banned_users.temporary %}
    <li><a href='/users/{{ ban.target.id }}'>{{ ban.target.username }}</a> hasta el {{ ban.until|date('d/M/Y H:i (e)') }}
      <span
        class='tooltip-hint hint--rounded hint--top'
        data-hint='Razón: {{ ban.reason }}'
      >[Baneado por <b>{{ ban.by.username }}</b>]</span>
      <span class='actions'>
        [<a href='/users/{{ ban.target.id }}/unban'>Desbanear</a>]
      </span>
    </li>
  {% else %}
    <li>Parece que no hay usuarios baneados temporalmente.</li>
  {% endfor %}
  </ul>

  <h4 >Permanentemente</h4>
  <ul>
  {% for ban in banned_users.permanent %}
    <li><a href='/users/{{ ban.target.id }}'>{{ ban.target.username }}</a> hasta el {{ ban.until|date('d/M/Y H:i (e)') }}
      <span
        class='tooltip-hint hint--rounded hint--top'
        data-hint='Razón: {{ ban.reason }}'
      >[Baneado por <b>{{ ban.by.username }}</b>]</span>
      <span class='actions'>
        [<a href='/users/{{ ban.target.id }}/unban'>Desbanear</a>]
      </span>
    </li>
  {% else %}
    <li>Parece que no hay usuarios baneados permanentemente.</li>
  {% endfor %}
  </ul>
{% endblock %}

{% block scripts %}
  {{ assets.js('panel_alerts') }}
{% endblock %}
